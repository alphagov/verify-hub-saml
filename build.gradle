apply from: 'buildSrc/publish.gradle'
apply plugin: 'com.github.ben-manes.versions'
buildscript {
  repositories {
    maven { url 'https://artifactory.ida.digital.cabinet-office.gov.uk/artifactory/whitelisted-repos' }
  }
  dependencies {
    classpath 'com.github.ben-manes:gradle-versions-plugin:0.11.3'
  }
}

ext {
    opensaml_version = '3.3.0'
    ida_utils_version = '2.0.0-313'
    saml_libs_version = "${opensaml_version}-107"
}

subprojects {
    apply plugin: 'java'
    repositories {
        maven { url 'https://artifactory.ida.digital.cabinet-office.gov.uk/artifactory/whitelisted-repos' }
    }

    group = "uk.gov.ida"
    version = "$opensaml_version-${System.env.BUILD_NUMBER ?: 'SNAPSHOT'}"

    configurations {
        all*.exclude group: 'org.mockito', module: 'mockito-all'
        common
        test_deps
    }

    dependencies {
        common "org.opensaml:opensaml-core:$opensaml_version",
                "uk.gov.ida:saml-utils:$saml_libs_version",
                'com.google.guava:guava:18.0',
                'com.google.inject:guice:4.0',
                'joda-time:joda-time:2.9',
                'org.slf4j:slf4j-api:1.7.12',
                'uk.gov.ida:ida-dev-pki:1.1.0-20',
                'commons-lang:commons-lang:2.6'

        common ("uk.gov.ida:saml-extensions:$saml_libs_version") { force = true }

        test_deps 'junit:junit:4.11',
                'org.assertj:assertj-joda-time:1.1.0',
                'org.assertj:assertj-core:1.6.0'
    }
}
